CREATE TABLE  [dbo].T_ANNOUNCEMENT (
  ANNOUNCE_CODE INT IDENTITY(1,1) NOT NULL,
  SUBJECT nvarchar(250) DEFAULT '',
  PUBLISHED_DATE date DEFAULT '',
  EXPIRED_DATE date DEFAULT '',
  MSG_TYPE varchar(10) DEFAULT '',
  MESSAGES nvarchar(1000) DEFAULT '',
  BU INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  ATTACHMENT_PATH varchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (ANNOUNCE_CODE)
)

ALTER TABLE [dbo].T_ANNOUNCEMENT ADD  DISTRICT INT DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';
ALTER TABLE [dbo].T_ANNOUNCEMENT ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_ANNOUNCEMENT ADD OFFICE [int] DEFAULT 0;
CREATE INDEX [T_ANNOUNCEMENT_BU] ON [dbo].T_ANNOUNCEMENT ([BU] ASC )
CREATE INDEX [T_ANNOUNCEMENT_CITY] ON [dbo].T_ANNOUNCEMENT ([CITY] ASC )
CREATE INDEX [T_ANNOUNCEMENT_SSC] ON [dbo].T_ANNOUNCEMENT ([SSC] ASC )
CREATE INDEX [T_ANNOUNCEMENT_DISTRICT] ON [dbo].T_ANNOUNCEMENT ([DISTRICT] ASC )
CREATE INDEX [T_ANNOUNCEMENT_STATUS] ON [dbo].T_ANNOUNCEMENT ([STATUS] ASC )


CREATE TABLE  [dbo].T_AUDIT_TRAIL (
  LOG_CODE INT IDENTITY(1,1)  NOT NULL ,
  USER_CODE VARCHAR(10)   NULL,
  LOG_DATE DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
  LOG_TIME VARCHAR(10) DEFAULT NULL,
  MODULE_NAME VARCHAR(100) NOT NULL DEFAULT '',
  ACTION_TEXT VARCHAR(10) NOT NULL DEFAULT '',
  ITEM_CODE TEXT,
  PRIMARY KEY  (LOG_CODE)
);


CREATE TABLE  [dbo].T_INTERVIEW(
  INTERVIEW_CODE INT IDENTITY(1,1) NOT NULL,
  INTERVIEW_TYPE varchar(250) DEFAULT '',
  INTERVIEW_SESSION_NAME nvarchar(250) DEFAULT '',
  INTERVIEW_DATE DATE DEFAULT '',
  START_TIME [datetime] DEFAULT '',
  END_TIME  [datetime] DEFAULT '',
  LOCATION nvarchar(250) DEFAULT '',
  INTERVIEW_MATERIAL nvarchar(250) DEFAULT '',
  ESTIMATED_CANDIDATES [integer] DEFAULT '',
  BU INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (INTERVIEW_CODE) 
)

ALTER TABLE [dbo].T_INTERVIEW ADD  DISTRICT INT DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';
ALTER TABLE [dbo].T_INTERVIEW ADD  TOPIC_FILE_NAME nvarchar(250) DEFAULT '',TOPIC_FILE_PATH  nvarchar(300) DEFAULT '';
CREATE INDEX [T_INTERVIEW_BU] ON [dbo].T_INTERVIEW ([BU] ASC )
CREATE INDEX [T_INTERVIEW_CITY] ON [dbo].T_INTERVIEW ([CITY] ASC )
CREATE INDEX [T_INTERVIEW_SSC] ON [dbo].T_INTERVIEW ([SSC] ASC )
CREATE INDEX [T_INTERVIEW_DISTRICT] ON [dbo].T_INTERVIEW ([DISTRICT] ASC )
CREATE INDEX [T_PRESENTER_BU] ON [dbo].T_INTERVIEW ([BU] ASC )
CREATE INDEX [T_PRESENTER_CITY] ON [dbo].T_INTERVIEW ([CITY] ASC )
CREATE INDEX [T_PRESENTER_SSC] ON [dbo].T_INTERVIEW ([SSC] ASC )
CREATE INDEX [T_PRESENTER_DISTRICT] ON [dbo].T_INTERVIEW ([DISTRICT] ASC )
CREATE INDEX [T_INTERVIEW_STATUS] ON [dbo].T_INTERVIEW ([STATUS] ASC )
CREATE INDEX [T_PRESENTER_STATUS] ON [dbo].T_INTERVIEW ([STATUS] ASC )
ALTER TABLE [dbo].T_INTERVIEW ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_INTERVIEW ADD OFFICE [int] DEFAULT 0;


CREATE TABLE  [dbo].T_USER(
  USER_NO INT IDENTITY(1,1) NOT NULL,
  CHANNEL varchar(100) DEFAULT '',
  BU INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  USERTYPE VARCHAR(3) DEFAULT '',
  DEPARTMENT INT DEFAULT '',
  STAFF_LOGIN_ID nvarchar(20) DEFAULT '',
  STAFF_NAME nvarchar(20) DEFAULT '',
  EMAIL_ADDRESS nvarchar(100) DEFAULT '',
  CONTACT_NUMBER nvarchar(12) DEFAULT '',
  PASSWORD nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (USER_NO)
  
)
ALTER TABLE [dbo].T_USER ADD  DISTRICT INT DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';
ALTER TABLE [dbo].T_USER ADD EXTENSION_NUMBER nvarchar(12) NULL;
ALTER TABLE [dbo].T_USER ADD  DATE_LAST_LOGIN [datetime] DEFAULT '',FAILED_LOGIN_ATTEMPTS [datetime] DEFAULT '';
ALTER TABLE [dbo].T_USER ADD  STATUS_PSW_CHANGE bit DEFAULT '';
INSERT INTO [dbo].T_USER ([CHANNEL], [BU], [CITY], [SSC], [USERTYPE], [DEPARTMENT], [STAFF_LOGIN_ID], [STAFF_NAME], [EMAIL_ADDRESS], [CONTACT_NUMBER], [PASSWORD], [CREATED_BY], [CREATION_DATE], [MODIFIED_BY], [MODIFICATION_DATE], [STATUS], [DISTRICT], [TOKETN], [EXTENSION_NUMBER], [DATE_LAST_LOGIN], [FAILED_LOGIN_ATTEMPTS], [STATUS_PSW_CHANGE])
VALUES('2|3|',0,0,0,'AD',0,	'QUIX_ADMIN','Jay Gagnani',	'jay.gagnani@quix.com.sg','9033611954','fcc3a23fc7232cc89c7cb0f23d8774fefb73d7dc2ab22e6a1b6b8b202b4dcc91',	3	,'2015/05/13 10:07:42.047',	0	,''	,1	,'2524474',	0,'2222222222'	,	'2015/08/04 13:17:37.230',	'2015/08/03 17:45:20.687',1)

ALTER TABLE [dbo].T_USER ADD BRANCH [int] DEFAULT 0;
UPDATE [dbo].T_USER SET [BRANCH]=0;
ALTER TABLE [dbo].[T_USER] ADD OFFICE [int] DEFAULT 0;
UPDATE [dbo].[T_USER] SET OFFICE=0;

CREATE TABLE  [dbo].T_HOLIDAY(
  HOLIDAY_CODE INT IDENTITY(1,1) NOT NULL,
  HOLIDAY_NAME nvarchar(250) DEFAULT '',
  START_DATE DATE DEFAULT '',
  END_DATE DATE DEFAULT '',
  BU INT DEFAULT '',
  CITY INT DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (HOLIDAY_CODE)
  
)

ALTER TABLE [dbo].T_HOLIDAY ADD  DISTRICT INT DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';
ALTER TABLE [dbo].T_HOLIDAY ADD  SSC INT DEFAULT '', icon_type VARCHAR(2) DEFAULT '';
CREATE INDEX [T_HOLIDAY_BU] ON [dbo].T_HOLIDAY ([BU] ASC )
CREATE INDEX [T_HOLIDAY_CITY] ON [dbo].T_HOLIDAY ([CITY] ASC )
CREATE INDEX [T_HOLIDAY_SSC] ON [dbo].T_HOLIDAY ([SSC] ASC )
CREATE INDEX [T_HOLIDAY_DISTRICT] ON [dbo].T_HOLIDAY ([DISTRICT] ASC )
CREATE INDEX [T_HOLIDAY_STATUS] ON [dbo].T_HOLIDAY ([STATUS] ASC )
ALTER TABLE [dbo].[T_HOLIDAY] ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_HOLIDAY ADD OFFICE [int] DEFAULT 0;


CREATE TABLE  [dbo].T_EVENT(
  EVENT_CODE INT IDENTITY(1,1) NOT NULL,
  EVENT_TYPE varchar(20) DEFAULT '',
  EOP_TOPIC nvarchar(250) DEFAULT '',
  EVENT_NAME nvarchar(250) DEFAULT '',
  EVENT_DATE DATE DEFAULT '',
  START_TIME [datetime] DEFAULT '',
  END_TIME  [datetime] DEFAULT '',
  EOP_DESCRIPTION nvarchar(250) DEFAULT '',
  LOCATION nvarchar(250) DEFAULT '',
  SPEAKER nvarchar(20) DEFAULT '',
  ESTIMATED_CANDIDATES [integer] DEFAULT '',
  OPEN_TO nvarchar(20) DEFAULT '',
  OPEN_TO_REGISTRATION VARCHAR(1) DEFAULT '',
  ORGANIZER INT DEFAULT '',
  BU int DEFAULT '',
  DISTRICT INT DEFAULT '',
  CITY int DEFAULT '',
  SSC int DEFAULT '',
  Agent_Team nvarchar(20) DEFAULT '',
  PROFILE_PATH varchar(100) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  TOKETN VARCHAR(50) DEFAULT '',
  PRIMARY KEY (EVENT_CODE) 
)

CREATE INDEX [T_EVENT_BU] ON [dbo].T_EVENT ([BU] ASC )
CREATE INDEX [T_EVENT_CITY] ON [dbo].T_EVENT ([CITY] ASC )
CREATE INDEX [T_EVENT_SSC] ON [dbo].T_EVENT ([SSC] ASC )
CREATE INDEX [T_EVENT_DISTRICT] ON [dbo].T_EVENT ([DISTRICT] ASC )
CREATE INDEX [T_EVENT_STATUS] ON [dbo].T_EVENT ([STATUS] ASC )
ALTER TABLE [dbo].T_EVENT ADD TOPIC_FILE_PATH  nvarchar(300) DEFAULT '';
ALTER TABLE [dbo].T_EVENT ADD SPECIAL_GROUP_LISTING_PATH  nvarchar(300) DEFAULT '';
ALTER TABLE [dbo].T_EVENT ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_EVENT ADD OFFICE [int] DEFAULT 0;


CREATE TABLE  [dbo].T_BU(
 BU_CODE INT IDENTITY(1,1) NOT NULL,
  BU_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (BU_CODE)
  
)
ALTER TABLE [dbo].T_BU ADD  TOKETN VARCHAR(50) DEFAULT '';
CREATE INDEX [T_BU_STATUS] ON [dbo].T_BU ([STATUS] ASC )


CREATE TABLE  [dbo].T_DISTRICT(
 DISTRICT_CODE INT IDENTITY(1,1) NOT NULL,
  BU_CODE int CONSTRAINT FK_DISTRICT_NO FOREIGN KEY REFERENCES T_BU(BU_CODE),
  DISTRICT_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (DISTRICT_CODE)
  
)
ALTER TABLE [dbo].T_DISTRICT ADD  TOKETN VARCHAR(50) DEFAULT '';
CREATE INDEX [T_DISTRICT_STATUS] ON [dbo].T_DISTRICt ([STATUS] ASC )
CREATE INDEX [T_DISTRICT_BU_CODE] ON [dbo].T_DISTRICT ([BU_CODE] ASC )


CREATE TABLE  [dbo].T_BRANCH(
 BRANCH_CODE INT IDENTITY(1,1) NOT NULL,
  DISTRICT_CODE int CONSTRAINT FK_BRANCH_NO FOREIGN KEY REFERENCES T_DISTRICT(DISTRICT_CODE),
  BRANCH_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (BRANCH_CODE)
)
ALTER TABLE [dbo].T_BRANCH ADD [TOKETN] [varchar] (50) NULL;
ALTER TABLE [dbo].T_BRANCH ADD BRANCH_FULLNAME nvarchar(50) DEFAULT '';

CREATE TABLE [dbo].CITY_ER(
co [nchar](4),
CITYCOD [nchar](2),
CITYNAME [nchar](30),
REGCOD [nchar](10)
)

CREATE TABLE  [dbo].LOCAT_ER(
co [nchar](4),
LOCCODE [nchar](4),
LOCNAME [nchar](30),
CTYCOD [nchar](2) 

)




CREATE TABLE  [dbo].OFFICE_ER(
co [nchar](4),
OFFCOD [nchar](4),
OFFNAME [nchar](30),
MANCOD [float],
LOCCODEN [nchar](4),
LOCNAME [nchar](30),
CTYCOD [nchar](2)
)



CREATE TABLE  [dbo].TEAM_ER(
co [nchar](4),
TEAMCOD [nchar](9),
TEAMNAME [nchar](30),
OFFCOD [nchar](4),
TEAMTST [nchar](1),
LOCCODEN [nchar](4),
CTYCOD [nchar](2)
)


CREATE TABLE  [dbo].T_CHANNEL(
 CHANNEL_CODE INT IDENTITY(1,1) NOT NULL,
  CHANNEL_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (CHANNEL_CODE)
  
)
ALTER TABLE [dbo].T_CHANNEL ADD  TOKETN VARCHAR(50) DEFAULT '';


CREATE TABLE  [dbo].T_DEPARTMENT(
DEPT_CODE INT IDENTITY(1,1) NOT NULL,
  DEPT_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  PRIMARY KEY (DEPT_CODE)
  
)
ALTER TABLE [dbo].T_DEPARTMENT ADD  TOKETN VARCHAR(50) DEFAULT '';


CREATE TABLE  [dbo].T_VERSION(
	VER_CODE INT IDENTITY(1,1) NOT NULL,
	VER_NO int,
	VER_DATE date 
)
INSERT INTO  [dbo].T_VERSION (VER_NO,VER_DATE) VALUES (1,  GETDATE());

CREATE TABLE  [dbo].T_PRESENTER(
  PRESENTER_ID INT IDENTITY(1,1) NOT NULL,
  PRESENTER_NAME nvarchar(250) DEFAULT '',
  PRESENTER_DESC nvarchar(1000) DEFAULT '',
  VISIBILITY varchar(10) DEFAULT '',
  CATEGORY_CODE int DEFAULT '',
  START_DATE datetime DEFAULT '',
  EXPIRY_DATE datetime DEFAULT '',
   BU INT DEFAULT '',
  DISTRICT INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  IMAGE_FILE_NAME nvarchar(250) DEFAULT '',
  IMAGE_FILE_PATH  nvarchar(300) DEFAULT '',
  MATERIAL_FILE_NAME nvarchar(250) DEFAULT '',
  MATERIAL_FILE_PATH  nvarchar(300) DEFAULT '',
   CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  PRIMARY KEY (PRESENTER_ID)
)

ALTER TABLE [dbo].T_PRESENTER ADD  STATUS bit DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';
ALTER TABLE [dbo].T_PRESENTER ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_PRESENTER ADD OFFICE [int] DEFAULT 0;

CREATE TABLE  [dbo].T_PRESENTER_CATEGORY(
  PRESENTER_CATEGORY_CODE INT IDENTITY(1,1) NOT NULL,
  PRESENTER_CATEGORY_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  TOKETN VARCHAR(50) DEFAULT '',
  PRIMARY KEY (PRESENTER_CATEGORY_CODE)
  )
  
  CREATE TABLE  [dbo].T_FESTIVE_CATEGORY(
 FESTIVE_CATEGORY_CODE INT IDENTITY(1,1) NOT NULL,
  FESTIVE_CATEGORY_NAME nvarchar(250) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  STATUS bit DEFAULT '',
  TOKETN VARCHAR(50) DEFAULT '',
  PRIMARY KEY (FESTIVE_CATEGORY_CODE)
  )
  
  CREATE TABLE  [dbo].T_E_GREETING(
  E_GREETING_ID INT IDENTITY(1,1) NOT NULL,
  E_GREETING_NAME nvarchar(250) DEFAULT '',
  FESTIVE_CATEGORY_CODE int CONSTRAINT FK_FESTIVE_CATEGORY_NO FOREIGN KEY REFERENCES T_FESTIVE_CATEGORY(FESTIVE_CATEGORY_CODE),
  MATERIAL_FILE_NAME nvarchar(250) DEFAULT '',
  MATERIAL_FILE_PATH  nvarchar(300) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  PRIMARY KEY (E_GREETING_ID)
)
ALTER TABLE [dbo].T_E_GREETING ADD  STATUS bit DEFAULT '', TOKETN VARCHAR(50) DEFAULT '';

CREATE TABLE  [dbo].T_INDIVIDUAL_GOAL (
  INDIVIDUAL_ID INT IDENTITY(1,1) NOT NULL,
  AGENT_CODE varchar(20) DEFAULT '',
  FOR_YEAR int DEFAULT '',
  GA INT DEFAULT '',
  HA INT DEFAULT '',
  GEN_Y INT DEFAULT '',
  SA INT DEFAULT '',
  TOTAL INT DEFAULT '',
  GOAL_STATUS varchar(30) DEFAULT '',
  APPROVE_REJECT varchar(1) DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
   MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  PRIMARY KEY (INDIVIDUAL_ID)
)

CREATE TABLE  T_GOAL_BREAKDOWN (
  BREAKDOWN_ID INT IDENTITY(1,1) NOT NULL,
  AGENT_CODE varchar(20) DEFAULT '',
  FOR_YEAR INT DEFAULT '',
  DECE INT DEFAULT '',
  JAN INT DEFAULT '',
  FEB INT DEFAULT '',
  MARCH INT DEFAULT '',
  APRIL INT DEFAULT '',
  MAY INT DEFAULT '',
  JUNE INT DEFAULT '',
  JULY INT DEFAULT '',
  AUGUST INT DEFAULT '',
  SEPT INT DEFAULT '',
  OCT INT DEFAULT '',
  NOV INT DEFAULT '',
  TOTAL INT DEFAULT '',
  CREATED_BY nvarchar(20)  DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
   MODIFIED_BY nvarchar(20) DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
  PRIMARY KEY (BREAKDOWN_ID)
)
ALTER TABLE [dbo].T_GOAL_BREAKDOWN ADD  PHASE_NAME NVARCHAR(30)  DEFAULT '';

CREATE TABLE  T_HISTORY (
  HISTORY_ID INT IDENTITY(1,1) NOT NULL,
  HISTORY_DATE  datetime DEFAULT '',
  GOAL_STATUS varchar(30) DEFAULT '',
  AGENT_CODE varchar(20) DEFAULT '',
   GA INT DEFAULT '',
  HA INT DEFAULT '',
  GEN_Y INT DEFAULT '',
  SA INT DEFAULT '',
  TOTAL INT DEFAULT '',
    PRIMARY KEY (HISTORY_ID)
)

CREATE TABLE  [dbo].T_SPECIAL_GROUP(
  CODE INT IDENTITY(1,1) NOT NULL,
  EVENT_CODE int CONSTRAINT FK_EVENT_CODE_SG  FOREIGN KEY REFERENCES T_EVENT(EVENT_CODE),
  AGENCY_UNIT nvarchar(50) DEFAULT '',
  PRIMARY KEY (CODE)
  
)


CREATE TABLE  [dbo].T_EVENT_REG(
  CANDIDATE_CODE INT IDENTITY(1,1) NOT NULL,
  EVENT_CODE int CONSTRAINT FK_EVENT_CODE_REG  FOREIGN KEY REFERENCES T_EVENT(EVENT_CODE),
  CANDIDATE_NAME nvarchar(250) DEFAULT '',
  SERVICING_AGENT nvarchar(30) DEFAULT '',
  AGENT_NAME nvarchar(250) DEFAULT '',
  BU INT DEFAULT '',
  DISTRICT INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  AGENCY_LEADER_CODE nvarchar(30) DEFAULT '',
  AGENCY_LEADER_NAME nvarchar(250) DEFAULT '',
  SOURCE_OF_REFERAL nvarchar(250) DEFAULT '',
  AGE int DEFAULT '',
  DOB DATE DEFAULT '',
  GENDER varchar(1) DEFAULT '',
  CONTACT_NUMBER nvarchar(12) DEFAULT '',
  TIME_IN [datetime] DEFAULT '',
  COMPLETE_STATUS varchar(1) DEFAULT 'N',
  STATUS bit DEFAULT '',
  TOKEN VARCHAR(50) DEFAULT '',
  PRIMARY KEY (CANDIDATE_CODE)
)
ALTER TABLE [dbo].T_EVENT_REG ADD BRANCH [int] DEFAULT 0;
ALTER TABLE [dbo].T_EVENT_REG ADD OFFICE [int] DEFAULT 0;
ALTER TABLE [dbo].T_EVENT_REG ADD EVENT_CANDIDATE_CODE nvarchar(50) NULL;


CREATE TABLE [dbo].T_ADDRESS_BOOK (
  ADDRESS_CODE INT IDENTITY(1,1) NOT NULL,
  AGENT_ID nvarchar(50) DEFAULT '',
  NAME varchar(250) DEFAULT '',
  GENDER char(1) DEFAULT '',
  BIRTH_DATE date DEFAULT '',
  CREATION_DATE datetime DEFAULT '',
  MODIFICATION_DATE datetime DEFAULT '',
 RECRUITMENT_PROGRESS_STATUS nvarchar(50) DEFAULT '',
  PRIMARY KEY (ADDRESS_CODE)
)
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD REFERAL_SOURCE nvarchar(250) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD ADDRESS_GROUP nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD ADDRESS_INFO nvarchar(250) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD POSTAL_CODE nvarchar(10) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD FIXED_LINE_NO nvarchar(20) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD MOB_PHONE_NO nvarchar(20) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD OFF_PHONE_NO nvarchar(20) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD MARRITAL_STATUS nvarchar(1) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD EDUCATION nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD EXPERIENCE nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD YEARLY_INCOME nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD WORK_CONDITION nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD INSURANCE nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD OUTLOOK_APP nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD RECOMMENDED_RECRUITMENT_SCHEME nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD SALES_EXP nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD INDUSTRY nvarchar(250) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD REMARKS nvarchar(250) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD WEIBO nvarchar(50) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD WE_CHAT nvarchar(100) DEFAULT '';	
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CREATED_BY nvarchar(10) DEFAULT '';	
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD MODIFIED_BY nvarchar(10) DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD ID_TYPE nvarchar(10) NULL;	
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD AGE INT DEFAULT '';
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD BIRTH_PLACE nvarchar(20) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD EMAIL_ID nvarchar(100) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD RACE nvarchar(10) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD REJOIN nvarchar(10) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD QQ nvarchar(100) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD LAST_CONTACTED_DATE datetime NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD RECRUITED_BY nvarchar(20) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD IOS_ADDRESS_CODE nvarchar (10) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD NRIC nvarchar (50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD TALENT_PROFILE nvarchar (50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD NATURE_OF_BUSINESS nvarchar (50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CANDIDATE_PHOTO varbinary(8000) NULL;
CREATE INDEX AGENT_ID ON [dbo].T_ADDRESS_BOOK (AGENT_ID); 
CREATE INDEX ADDRESS_CODE_AB ON [dbo].T_ADDRESS_BOOK (ADDRESS_CODE); 
CREATE INDEX IOS_ADDRESS_CODE_AB ON [dbo].T_ADDRESS_BOOK (IOS_ADDRESS_CODE);   
CREATE INDEX CREATED_BY_AB ON [dbo].T_ADDRESS_BOOK (CREATED_BY);   
CREATE INDEX CREATION_DATE_AB ON [dbo].T_ADDRESS_BOOK (CREATION_DATE);   
CREATE INDEX MODIFIED_BY_AB ON [dbo].T_ADDRESS_BOOK (MODIFIED_BY);   
CREATE INDEX MODIFICATION_DATE_AB ON [dbo].T_ADDRESS_BOOK (MODIFICATION_DATE);  
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD INTERVIEW_COMPLETION_DATE datetime NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD DELETE_STATUS bit;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD BRANCH_CODE nvarchar(50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CANDIDATE_AGENT_CODE nvarchar(50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD RECRUITMENT_TYPE nvarchar(20) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CONTRACT_DATE datetime NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CC_TEST_RESULT nvarchar(50) NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ADD CC_TEST_RESULT_DATE date NULL;
ALTER TABLE [dbo].T_ADDRESS_BOOK ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100);



CREATE TABLE [dbo].T_GOAL_CONFIG(
	  GOAL_CONFIG_ID INT IDENTITY(1,1) NOT NULL,
	  POTENTIAL_CANDIDATE INT DEFAULT '0',
	  EOP_REGISTRATION INT DEFAULT '0',
	  FIRST_INTERVIEW INT DEFAULT '0',
	  EOP_ATTENDANCE INT DEFAULT '0',
	  CC_ASSESSMENT INT DEFAULT '0',
	  COMPANY_INTERVIEW INT DEFAULT '0',
	  PASS_ALE INT DEFAULT '0',
	  ATTENDED_TRAINING INT DEFAULT '0',
	  SIGN_CONTRACT INT DEFAULT '0',
	  CREATED_BY nvarchar(20)  DEFAULT '',
	  CREATION_DATE datetime DEFAULT '',
	  PRIMARY KEY (GOAL_CONFIG_ID)
	);

CREATE TABLE  [dbo].T_INTERVIEW_REG
(
  CANDIDATE_CODE INT IDENTITY(1,1) NOT NULL,
  INTERVIEW_CODE int CONSTRAINT FK_INTERVIEW_CODE_REG  FOREIGN KEY REFERENCES T_INTERVIEW(INTERVIEW_CODE),
  CANDIDATE_NAME nvarchar(250) DEFAULT '',
  SERVICING_AGENT nvarchar(30) DEFAULT '',
  AGENT_NAME nvarchar(250) DEFAULT '',
  BU INT DEFAULT '',
  DISTRICT INT DEFAULT '',
  CITY INT DEFAULT '',
  SSC INT DEFAULT '',
  AGENCY_LEADER_CODE nvarchar(30) DEFAULT '',
  AGENCY_LEADER_NAME nvarchar(250) DEFAULT '',
  SOURCE_OF_REFERAL nvarchar(250) DEFAULT '',
  AGE int DEFAULT '',
  DOB DATE DEFAULT '',
  GENDER varchar(1) DEFAULT '',
  CONTACT_NUMBER nvarchar(12) DEFAULT '',
  CCTEST_RESULT nvarchar(20) DEFAULT '',
  RECRUITMENT_SCHEME nvarchar(2) DEFAULT '',
  P100 INT DEFAULT 0,
  INTERVIEW_RESULT VARCHAR(1) DEFAULT '',
  REMARKS nvarchar(200) DEFAULT '',
  STATUS bit DEFAULT '',
  TOKEN VARCHAR(50) DEFAULT '',
  PRIMARY KEY (CANDIDATE_CODE)
);
ALTER TABLE [dbo].T_INTERVIEW_REG ADD NRIC NVARCHAR(50);	
ALTER TABLE [dbo].T_INTERVIEW_REG ADD INTERVIEW_CANDIDATE_CODE nvarchar(50) NULL;
ALTER TABLE [dbo].[T_INTERVIEW_REG] ADD BRANCH [int],OFFICE INT;



CREATE TABLE [dbo].T_CANDIDATE_EDUCATION(
	  ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_ED FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      START_DATE datetime DEFAULT '',
      END_DATE datetime DEFAULT '',
      EDUCATION nvarchar(50) DEFAULT '',
      SCHOOL nvarchar(50) DEFAULT '',
      EDUCATION_LEVEL nvarchar(50) DEFAULT '',
      WITNESS nvarchar(50) DEFAULT '',
      WITNESS_PHONE_NO nvarchar(50) DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_ED ON [dbo].T_CANDIDATE_EDUCATION(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_ED ON [dbo].T_CANDIDATE_EDUCATION (IOS_ADDRESS_CODE);

CREATE TABLE [dbo].T_CANDIDATE_E_SIGNATURE(
	  ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_ES FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      BRANCH nvarchar(50) DEFAULT '',
      SERVICE_DEPARTMENT nvarchar(50) DEFAULT '',
      CITY nvarchar(50) DEFAULT '',
      AGENT_ID nvarchar(50) DEFAULT '',
      ATTACHED_WITH_INSURANCE_CO bit DEFAULT '',
      CONTACT_WITH_AIA bit DEFAULT '',
      TAKEN_PSP_TEST bit DEFAULT '',
      APPLICATION_DATE datetime DEFAULT '',
      CANDIDATE_NAME nvarchar(50) DEFAULT '',
      E_SIGNATURE_PHOTO varbinary(8000) NULL,
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_ES ON [dbo].T_CANDIDATE_E_SIGNATURE (ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_ES ON [dbo].T_CANDIDATE_E_SIGNATURE (IOS_ADDRESS_CODE);


CREATE TABLE [dbo].T_CANDIDATE_FAMILY_INFO(
	  ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_SG FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      NAME nvarchar(50) DEFAULT '',
      UNIT nvarchar(50) DEFAULT '',
      POSITION nvarchar(50) DEFAULT '',
      RELATIONSHIP nvarchar(50) DEFAULT '',
      OCCUPATION nvarchar(50) DEFAULT '',
      PHONE_NO nvarchar(50) DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_FI ON [dbo].T_CANDIDATE_FAMILY_INFO(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_FI ON [dbo].T_CANDIDATE_FAMILY_INFO (IOS_ADDRESS_CODE);

CREATE TABLE [dbo].T_CANDIDATE_GROUP(
	  ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_GR FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      AGENT_ID nvarchar(50) DEFAULT '',
      GROUP_NAME nvarchar(50) DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_GR ON [dbo].T_CANDIDATE_GROUP(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_GR ON [dbo].T_CANDIDATE_GROUP (IOS_ADDRESS_CODE);


CREATE TABLE [dbo].T_CANDIDATE_PROFESSIONAL_CERTIFICATION(
      ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_PC FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      CERTIFICATE_NAME nvarchar(50) DEFAULT '',
      CHARTER_AGENCY nvarchar(50) DEFAULT '',
      CHARTER_DATE datetime DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_PC ON [dbo].T_CANDIDATE_PROFESSIONAL_CERTIFICATION(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_PC ON [dbo].T_CANDIDATE_PROFESSIONAL_CERTIFICATION (IOS_ADDRESS_CODE);

CREATE TABLE [dbo].T_CANDIDATE_WORK_EXPERIENCE(
      ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_WE FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      START_DATE datetime DEFAULT '',
      END_DATE datetime DEFAULT '',
      UNIT nvarchar(50) DEFAULT '',
      POSITION nvarchar(50) DEFAULT '',
      OCCUPATION nvarchar(50) DEFAULT '',
      WITNESS nvarchar(50) DEFAULT '',
      WITNESS_PHONE_NO nvarchar(50) DEFAULT '',
      INCOME nvarchar(50) DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_WE ON [dbo].T_CANDIDATE_WORK_EXPERIENCE(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_WE ON [dbo].T_CANDIDATE_WORK_EXPERIENCE (IOS_ADDRESS_CODE);

CREATE TABLE [dbo].T_CANDIDATE_NOTE(
      ADDRESS_CODE int CONSTRAINT FK_ADDRESS_CODE_NT FOREIGN KEY REFERENCES T_ADDRESS_BOOK(ADDRESS_CODE) NOT NULL,
	  IOS_ADDRESS_CODE nvarchar (10) NOT NULL,
      ACTIVITY_TYPE nvarchar(50) NOT NULL,
      ACTIVITY_DATE datetime NOT NULL,
      DESCRIPTION nvarchar(250) NULL,
      ACTIVITY_STATUS bit DEFAULT '',
	  PRIMARY KEY (ADDRESS_CODE, IOS_ADDRESS_CODE)
);
CREATE INDEX ADDRESS_CODE_NT ON [dbo].T_CANDIDATE_NOTE(ADDRESS_CODE);   
CREATE INDEX IOS_ADDRESS_CODE_NT ON [dbo].T_CANDIDATE_NOTE (IOS_ADDRESS_CODE);

CREATE TABLE [dbo].T_CANDIDATE_TRAINING_DETAIL (
    DETAIL_CODE INT IDENTITY(1,1) NOT NULL,
    COURSE_CODE nvarchar(50) NOT NULL,
    COURSE_NAME nvarchar(50) NULL,
    CURRICULAM_CODE nvarchar(50) NULL,
    COURSE_TYPE nvarchar(50) NULL,
    START_DATE datetime NOT NULL,
    CREATION_DATE datetime NULL,
);

CREATE TABLE [dbo].T_CANDIDATE_TRAINING_RESULT (
    RESULT_CODE INT IDENTITY(1,1) NOT NULL,
    PER_AGENT_NAME nvarchar(50) NOT NULL,
    PER_AGENT_Id nvarchar(50) NULL,
    RECRUITER_AGENT_CODE nvarchar(50) NULL,
    BRANCH_CODE nvarchar(50) NULL,
    COURSE_TYPE nvarchar(50) NULL,
    PASS_TIME datetime NOT NULL,
    CREATION_DATE datetime NULL,
);

CREATE TABLE  [dbo].T_INTERVIEW_CANDIDATE_MAT
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  CANDIDATE_CODE INT CONSTRAINT FK_INTERVIEW_REG FOREIGN KEY REFERENCES T_INTERVIEW_REG(CANDIDATE_CODE),
  FILE_NAME nvarchar(1000) DEFAULT '',
  FILE_DESC nvarchar(1000) DEFAULT '',
  CREATION_DATE datetime NULL,
  PRIMARY KEY (MATERIAL_CODE)
);

CREATE TABLE [dbo].T_CANDIDATE_FIRST_INTERVIEW (
    FIRST_INTERVIEW_CODE INT IDENTITY(1,1) NOT NULL,
    AGENT_ID nvarchar(50) NOT NULL,
    CANDIDATE_CODE nvarchar(50) NULL,
    INTERVIEW_RESULT nvarchar(10) NULL,
    RECRUITMENT_PLAN nvarchar(50) NULL,
    REMARKS nvarchar(250) NULL,
    PASS_TIME datetime NOT NULL,
);
----------------------------------------------------------------------------------------------


CREATE TABLE [dbo].T_CONFIGURATION_PROPERTIES (
    CONFIGURATION_CODE INT IDENTITY(1,1) NOT NULL,
    CONFIGURATION_KEY nvarchar(250) NOT NULL,
    CONFIGURATION_VALUE nvarchar(250) NOT NULL,
	PRIMARY KEY (CONFIGURATION_CODE)
);

CREATE TABLE [dbo].T_MAIL_PROPERTIES (
    MAIL_CODE INT IDENTITY(1,1) NOT NULL,
    MAIL_KEY nvarchar(250) NOT NULL,
    MAIL_VALUE nvarchar(250) NOT NULL,
	PRIMARY KEY (MAIL_CODE)
);

ALTER TABLE [dbo].T_ADDRESS_BOOK ALTER COLUMN CANDIDATE_PHOTO varbinary(max);
ALTER TABLE [dbo].T_CANDIDATE_E_SIGNATURE ALTER COLUMN E_SIGNATURE_PHOTO varbinary(max);

ALTER TABLE [dbo].T_CANDIDATE_FAMILY_INFO ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_E_SIGNATURE ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_EDUCATION ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_GROUP ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_NOTE ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_PROFESSIONAL_CERTIFICATION ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;
ALTER TABLE [dbo].T_CANDIDATE_WORK_EXPERIENCE ALTER COLUMN IOS_ADDRESS_CODE nvarchar (100) NOT NULL;


ALTER TABLE T_VERSION ALTER COLUMN VER_NO VARCHAR(10);
INSERT INTO [dbo].[T_VERSION] ([VER_NO], [VER_DATE]) VALUES('1.1','2015/08/13' );
ALTER TABLE [dbo].[T_USER] ADD CHO bit DEFAULT 0;
UPDATE [dbo].[T_USER] SET CHO=0;
UPDATE [dbo].[T_USER] SET [CHANNEL]='';

UPDATE [dbo].[T_BRANCH] SET [BRANCH_FULLNAME]=[BRANCH_NAME]



ALTER TABLE [dbo].[T_CANDIDATE_NOTE] ADD STATUS bit DEFAULT 1;


ALTER TABLE [dbo].[T_BU] ADD ORDERCODE [int] DEFAULT 0;
UPDATE [dbo].[T_BU] SET ORDERCODE=0
ALTER TABLE [dbo].[T_DISTRICT] ADD ORDERCODE [int] DEFAULT 0;
UPDATE [dbo].[T_DISTRICT] SET ORDERCODE=0
ALTER TABLE [dbo].[T_BRANCH]  ADD ORDERCODE [int] DEFAULT 0;
UPDATE [dbo].[T_BRANCH] SET ORDERCODE=0


CREATE TABLE  T_ANNOUNCEMENT_MATERIAL
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  ANNOUNCE_CODE INT CONSTRAINT FK_ANNOUNCEMENT_MAT FOREIGN KEY REFERENCES T_ANNOUNCEMENT(ANNOUNCE_CODE),
  MATERIAL_NAME  nvarchar(100) DEFAULT '',
  FIELD_NAME nvarchar(100) DEFAULT '',
  MATERIAL varbinary(MAX),
  PRIMARY KEY (MATERIAL_CODE)
);
CREATE TABLE  T_EVENT_MATERIAL
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  EVENT_CODE INT CONSTRAINT FK_EVENT_MAT FOREIGN KEY REFERENCES T_EVENT(EVENT_CODE),
  MATERIAL_NAME  nvarchar(100) DEFAULT '',
  FIELD_NAME nvarchar(100) DEFAULT '',
  MATERIAL varbinary(MAX),
  PRIMARY KEY (MATERIAL_CODE)
);
CREATE TABLE  T_INTERVIEW_MATERIAL
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  INTERVIEW_CODE INT CONSTRAINT FK_INTERVIEW_MAT FOREIGN KEY REFERENCES T_INTERVIEW(INTERVIEW_CODE),
  MATERIAL_NAME  nvarchar(100) DEFAULT '',
  FIELD_NAME nvarchar(100) DEFAULT '',
  MATERIAL varbinary(MAX),
  PRIMARY KEY (MATERIAL_CODE)
);
CREATE TABLE  T_PRESENTER_MATERIAL
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  PRESENTER_ID INT CONSTRAINT FK_PRESENTER_MAT FOREIGN KEY REFERENCES T_PRESENTER(PRESENTER_ID),
  MATERIAL_NAME  nvarchar(100) DEFAULT '',
  FIELD_NAME nvarchar(100) DEFAULT '',
  MATERIAL varbinary(MAX),
  PRIMARY KEY (MATERIAL_CODE)
);
CREATE TABLE  T_E_GREETING_MATERIAL
(
  MATERIAL_CODE INT IDENTITY(1,1) NOT NULL,
  E_GREETING_ID INT CONSTRAINT FK_E_GREETING_MAT FOREIGN KEY REFERENCES T_E_GREETING(E_GREETING_ID),
  MATERIAL_NAME  nvarchar(100) DEFAULT '',
  FIELD_NAME nvarchar(100) DEFAULT '',
  MATERIAL varbinary(MAX),
  PRIMARY KEY (MATERIAL_CODE)
);


ALTER TABLE [dbo].[T_DEPARTMENT] ADD ORDERCODE [int] DEFAULT 0;
UPDATE [dbo].[T_DEPARTMENT] SET ORDERCODE=0

UPDATE [dbo].[T_ANNOUNCEMENT] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_INTERVIEW] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_EVENT] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_PRESENTER] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_EVENT_REG] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_INTERVIEW_REG] SET OFFICE=0 where OFFICE IS NULL
UPDATE [dbo].[T_INTERVIEW_REG] SET OFFICE=0 where OFFICE IS NULL


DECLARE @ConstraintName1 nvarchar(200)
SELECT @ConstraintName1 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ADDRESS_BOOK]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'GENDER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ADDRESS_BOOK]'))
IF @ConstraintName1 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ADDRESS_BOOK] DROP CONSTRAINT ' + @ConstraintName1)



DECLARE @ConstraintName2 nvarchar(200)
SELECT @ConstraintName2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ADDRESS_BOOK]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'MARRITAL_STATUS'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ADDRESS_BOOK]'))
IF @ConstraintName2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ADDRESS_BOOK] DROP CONSTRAINT ' + @ConstraintName2)

DECLARE @ConstraintName3 nvarchar(200)
SELECT @ConstraintName3 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ADDRESS_BOOK]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'NAME'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ADDRESS_BOOK]'))
IF @ConstraintName3 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ADDRESS_BOOK] DROP CONSTRAINT ' + @ConstraintName3)


ALTER TABLE [dbo].[T_ADDRESS_BOOK] ALTER COLUMN [GENDER] char(2);
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ALTER COLUMN [MARRITAL_STATUS] varchar(2);
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ALTER COLUMN [NAME] NVARCHAR(250) NULL


CREATE TABLE [dbo].[AGENTER] (
  
  [CO] nchar (4) NULL DEFAULT (''),
  [AGTCOD] nchar (9) NULL  DEFAULT (''),
  [AGTNAME] nchar (30) NULL  DEFAULT (''),
  [LEADCODE] nchar (9) NULL  DEFAULT (''),
  [CITYCODE] nchar (2) NULL  DEFAULT (''),
  [SSC] nchar (4) NULL  DEFAULT (''),
  [AGTTYPE] nchar (2) NULL  DEFAULT (''),
  [AGTSTS] nchar (1) NULL  DEFAULT (''),
  [TEAMCODE] nchar (9) NULL  DEFAULT (''),
  [TEAMNAME] nchar (30) NULL  DEFAULT (''),
  [OFFCOD] nchar (4) NULL  DEFAULT (''),
  [OFFNAME] nchar (30) NULL  DEFAULT (''),
  [AGTID] nchar (20) NULL  DEFAULT (''),
  [AGTSEX] nchar (2) NULL  DEFAULT (''),
  [CONTDAT] [datetime] NULL  DEFAULT (''),
  [LEVEL] nchar (2) NULL  DEFAULT (''),
  [LEVELNAME] [nvarchar] (20) NULL  DEFAULT (''),
  [BIRTHDAY] [varchar](20) NULL  DEFAULT (''),
  [TEL] nchar (20) NULL  DEFAULT ('')
  
   )

   
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD ADDRESS_INFO1 nvarchar(100) DEFAULT '';
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD ADDRESS_INFO2 nvarchar(100) DEFAULT '';

CREATE TABLE T_APPLICATIONFORM(
    FORM_CODE [int] IDENTITY(1,1),
    FORM_CONTENT [varbinary](MAX)  DEFAULT NULL,
    FILENAME nvarchar(50) DEFAULT '',
    CANDIDATE_CODE INT DEFAULT '',
    PRIMARY KEY(FORM_CODE)
)

ALTER TABLE [T_INTERVIEW_CANDIDATE_MAT] ADD INTERVIEW_CODE INT
ALTER TABLE [T_INTERVIEW_CANDIDATE_MAT] ADD  FORM_CONTENT [varbinary](MAX)  DEFAULT NULL

ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD QR_CODE [varbinary](MAX)  DEFAULT NULL;
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD RG_ADDRESS_INFO nvarchar(100) DEFAULT '';
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD RG_ADDRESS_INFO1 nvarchar(100) DEFAULT '';
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD RG_ADDRESS_INFO2 nvarchar(100) DEFAULT '';
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD RG_POSTAL_CODE nvarchar(10) DEFAULT '';
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD NEW_COMER_SOURCE nvarchar(50) DEFAULT '';

ALTER TABLE [dbo].T_INTERVIEW_REG ADD INTERVIWER_NAME nvarchar(50) DEFAULT '';





DECLARE @ConstraintName22 nvarchar(200)
SELECT @ConstraintName22 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'GENDER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT_REG]'))
IF @ConstraintName22 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT_REG] DROP CONSTRAINT ' + @ConstraintName22)



ALTER TABLE [dbo].[T_EVENT_REG] ALTER COLUMN [GENDER] nvarchar(1)

DECLARE @ConstraintInterGen nvarchar(200)
SELECT @ConstraintInterGen = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'GENDER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW_REG]'))
IF @ConstraintInterGen IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW_REG] DROP CONSTRAINT ' + @ConstraintInterGen)



ALTER TABLE [dbo].[T_INTERVIEW_REG] ALTER COLUMN [GENDER] nvarchar(1)

ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD PRESENTER_IMAGE [varbinary](MAX)  DEFAULT NULL
ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD PRESENTER_DATE [datetime] DEFAULT '';



CREATE TABLE T_LOGS
(
	LOGS_ID [int] IDENTITY(1,1) NOT NULL,
	DATED   DATETIME NOT NULL,
    FILE_NAME [varchar](1000) NULL,
    LEVEL   VARCHAR(50) NOT NULL,
	MESSAGE [text],
    PRIMARY KEY (LOGS_ID)
	
);



DECLARE @ConstraintEventRegContact  nvarchar(200)
SELECT @ConstraintEventRegContact = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CONTACT_NUMBER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT_REG]'))
IF @ConstraintEventRegContact IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact)

ALTER TABLE [dbo].[T_EVENT_REG] ALTER COLUMN [CONTACT_NUMBER] nvarchar(50)  NULL;


SELECT @ConstraintEventRegContact = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_AUDIT_TRAIL]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'USER_CODE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_AUDIT_TRAIL]'))
IF @ConstraintEventRegContact IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_AUDIT_TRAIL] DROP CONSTRAINT ' + @ConstraintEventRegContact)

ALTER TABLE [dbo].[T_AUDIT_TRAIL] ALTER COLUMN [USER_CODE] varchar(20);



SELECT @ConstraintEventRegContact = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_USER]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'EXTENSION_NUMBER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_USER]'))
IF @ConstraintEventRegContact IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_USER] DROP CONSTRAINT ' + @ConstraintEventRegContact)

ALTER TABLE [dbo].[T_USER] ALTER COLUMN [EXTENSION_NUMBER] Nvarchar(50);

SELECT @ConstraintEventRegContact = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_USER]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CONTACT_NUMBER'
                        AND object_id = OBJECT_ID(N'[dbo].[T_USER]'))
IF @ConstraintEventRegContact IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_USER] DROP CONSTRAINT ' + @ConstraintEventRegContact)

ALTER TABLE [dbo].[T_USER] ALTER COLUMN [CONTACT_NUMBER] Nvarchar(50);


---------------------------------------------------------------

DROP INDEX [T_INTERVIEW_SSC] ON [dbo].[T_INTERVIEW]
GO
DROP INDEX [T_PRESENTER_CITY] ON [dbo].[T_INTERVIEW]
GO
DROP INDEX [T_PRESENTER_SSC] ON [dbo].[T_INTERVIEW]
GO
DROP INDEX [T_INTERVIEW_CITY] ON [dbo].[T_INTERVIEW]
GO


DECLARE @ConstraintEventRegContact2  nvarchar(200)
SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW] ALTER COLUMN [CITY] [nchar](2)  NULL;

SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW] ALTER COLUMN [OFFICE] [nchar](4)  NULL;


DROP INDEX [T_ANNOUNCEMENT_SSC] ON [dbo].[T_ANNOUNCEMENT]
GO

DROP INDEX [T_ANNOUNCEMENT_CITY] ON [dbo].[T_ANNOUNCEMENT]
GO

DECLARE @ConstraintEventRegContact2  nvarchar(200)
SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ANNOUNCEMENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ANNOUNCEMENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ANNOUNCEMENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_ANNOUNCEMENT] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ANNOUNCEMENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ANNOUNCEMENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ANNOUNCEMENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_ANNOUNCEMENT] ALTER COLUMN [CITY] [nchar](2)  NULL;

SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_ANNOUNCEMENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_ANNOUNCEMENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_ANNOUNCEMENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_ANNOUNCEMENT] ALTER COLUMN [OFFICE] [nchar](4)  NULL;



DROP INDEX [T_EVENT_SSC] ON [dbo].[T_EVENT]
GO
DROP INDEX [T_EVENT_CITY] ON [dbo].[T_EVENT]
GO

DECLARE @ConstraintEventRegContact2  nvarchar(200)
SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT] ALTER COLUMN [CITY] [nchar](2)  NULL;

SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT] ALTER COLUMN [OFFICE] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT_REG] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT_REG] ALTER COLUMN [CITY] [nchar](2)  NULL;

SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_EVENT_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_EVENT_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_EVENT_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_EVENT_REG] ALTER COLUMN [OFFICE] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_USER]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_USER]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_USER] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_USER] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_USER]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_USER]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_USER] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_USER] ALTER COLUMN [CITY] [nchar](2)  NULL;

SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_USER]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_USER]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_USER] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_USER] ALTER COLUMN [OFFICE] [nchar](4)  NULL;

ALTER TABLE [dbo].[T_ADDRESS_BOOK] ALTER COLUMN [CO] varchar(10);



SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'SSC'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW_REG] ALTER COLUMN [SSC] [nchar](4)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'CITY'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW_REG] ALTER COLUMN [CITY] [nchar](2)  NULL;


SELECT @ConstraintEventRegContact2 = Name FROM SYS.DEFAULT_CONSTRAINTS
WHERE PARENT_OBJECT_ID = OBJECT_ID('[dbo].[T_INTERVIEW_REG]')
AND PARENT_COLUMN_ID = (SELECT column_id FROM sys.columns
                        WHERE NAME = N'OFFICE'
                        AND object_id = OBJECT_ID(N'[dbo].[T_INTERVIEW_REG]'))
IF @ConstraintEventRegContact2 IS NOT NULL
EXEC('ALTER TABLE [dbo].[T_INTERVIEW_REG] DROP CONSTRAINT ' + @ConstraintEventRegContact2)

ALTER TABLE [dbo].[T_INTERVIEW_REG] ALTER COLUMN [OFFICE] [nchar](4)  NULL;

ALTER TABLE [dbo].[T_ADDRESS_BOOK] ADD [CO] varchar(10);

sp_RENAME 'OFFICE_ER.LOCCODEN', 'LOCCODE', 'COLUMN';

 sp_RENAME 'TEAM_ER.LOCCODEN', 'LOCCODE', 'COLUMN';

sp_RENAME 'TEAM_ER.LOCCODEN', 'LOCCODE', 'COLUMN';

